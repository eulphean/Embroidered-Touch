(this.webpackJsonpFabricInstrument=this.webpackJsonpFabricInstrument||[]).push([[0],{106:function(e,t,n){e.exports=n(153)},111:function(e,t,n){},112:function(e,t,n){},153:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(76),s=n.n(i),r=(n(111),n(112),n(2)),l=n(3),c=n(7),u=n(6),h=n(1),f=n(4),d=n(8),g="#849099",p="#FFFFFF",m="#000000",v="4px",b="12px",E="20px",y={container:{position:"relative"},button:{width:"125px",height:"35px"}},k=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={},a}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{style:y.container},o.a.createElement("button",{onClick:this.props.onClick?this.onClick.bind(this):function(){},style:y.button},this.props.children))}},{key:"onClick",value:function(){this.props.onClick()}}]),n}(o.a.Component),C=Object(h.a)(k),O={container:{position:"relative"},titleContainer:{display:"flex",backgroundColor:g,color:m,padding:v}},j=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={},a}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{style:O.container},o.a.createElement("div",{style:O.titleContainer},"EMBROIDERED TOUCH"),o.a.createElement("button",{onClick:this.props.logout},"Logout"))}}]),n}(o.a.Component),x=Object(h.a)(j),L=Object(h.a)(d.b),I={container:{position:"relative",color:p,padding:E}},S=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={},a}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{style:I.container},o.a.createElement("div",null,"Initial Set-Up"),o.a.createElement(C,null,o.a.createElement(L,{to:"/calibration"},"PAIR")))}}]),n}(o.a.Component),w=Object(h.a)(S),U=n(105),R=n.n(U),D=new(function(){function e(){Object(r.a)(this,e),this.siteURL="http://localhost:5000/app",this.loginURL="http://localhost:5000/login",this.signupURL="http://localhost:5000/signup",this.socket=R()(this.siteURL,{reconnection:!0,reconnectionDelay:500,reconnectionAttempts:1/0}),this.socket.once("connect",this.subscribe.bind(this)),this.canBroadcast=!1,this.sensorDataCallback="",this.readAllConfigCallback=""}return Object(l.a)(e,[{key:"subscribe",value:function(){console.log("Connected"),this.socket.on("time",this.logTime.bind(this)),this.socket.on("receiveSensorData",this.handleSensorData.bind(this)),this.socket.on("receiveAllConfigs",this.handleAllConfigs.bind(this))}},{key:"updateRoom",value:function(e){this.socket.emit("room"),this.canBroadcast=!this.canBroadcast,this.sensorDataCallback=e}},{key:"broadcastText",value:function(e){this.canBroadcast&&this.socket.emit("sensorData",e)}},{key:"handleSensorData",value:function(e){this.sensorDataCallback(e)}},{key:"saveUserConfig",value:function(e){this.socket.emit("saveUserConfig",e)}},{key:"updateUserConfig",value:function(e){this.socket.emit("updateUserConfig",e)}},{key:"deleteUserConfig",value:function(e){this.socket.emit("deleteUserConfig",e)}},{key:"requestForConfigs",value:function(e){this.readAllConfigCallback=e,this.socket.emit("requestForConfigs")}},{key:"handleAllConfigs",value:function(e){this.readAllConfigCallback(e)}},{key:"disconnect",value:function(){console.log("Socket Server Disconnected.")}},{key:"logTime",value:function(e){}}]),e}()),A=new(function(){function e(){Object(r.a)(this,e),this.cutoffVals=[{co:new Array(12).fill(150)},{co:new Array(12).fill(150)}],this.configs={},this.listeners=[],D.requestForConfigs(this.onAllConfigsLoaded.bind(this))}return Object(l.a)(e,[{key:"subscribe",value:function(e){var t=this;this.listeners.push(e);return function(){t.listeners=t.listeners.filter((function(t){return e!==t}))}}},{key:"setState",value:function(e,t,n){this.cutoffVals[e].co[t]=n}},{key:"onAllConfigsLoaded",value:function(e){for(var t=e,n=0;n<t.length;n++){var a=t[n].name,o=t[n].config;this.configs[a]=o}console.log(this.configs);for(var i=0;i<this.listeners.length;i++)this.listeners[i](this.configs)}},{key:"saveParams",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={},a=0;a<2;a++){for(var o={cutoff:{}},i=0;i<12;i++){var s=this.cutoffVals[a].co;o.cutoff[i]=s[i]}n[a.toString()]=o}var r={name:e,config:JSON.stringify(n)};t?(D.saveUserConfig(r),this.configs[e]=n):(D.updateUserConfig(r),this.configs[e]=n)}},{key:"updateParams",value:function(e){this.saveParams(e,!1)}},{key:"getCutoffValue",value:function(e,t,n){return this.configs[e]?this.configs[e][t].cutoff[n]:this.cutoffVals[t].co[n]}},{key:"getDefaultConfig",value:function(){for(var e={},t=0;t<2;t++){for(var n={cutoff:{}},a=0;a<12;a++){var o=this.cutoffVals[t].co;n.cutoff[a]=o[a]}e[t.toString()]=n}return e}}]),e}()),T=(Object(h.a)(d.b),{container:{display:"flex",flexDirection:"column",position:"relative",color:p,padding:E},buttons:{display:"flex",flexDirection:"row",marginTop:b},inputContainer:{display:"flex",flexDirection:"column",marginTop:b},input:{width:"100px",marginTop:v},resultLabel:{marginTop:v}}),F=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={username:"",password:"",message:"Message"},a.loginUrl=D.loginURL,a.signupURL=D.signupURL,console.log(a.context),a}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{style:T.container},o.a.createElement("div",null,"LOGIN"),o.a.createElement("div",{style:T.input},o.a.createElement("input",{style:T.input,onChange:this.usernameChanged.bind(this),type:"text",placeholder:"username..",value:this.state.username}),o.a.createElement("input",{style:T.input,onChange:this.passwordChanged.bind(this),type:"password",placeholder:"password..",value:this.state.password})),o.a.createElement("div",{style:T.buttons},o.a.createElement(C,{onClick:this.onClickLogin.bind(this)},"Sign In"),o.a.createElement(C,{onClick:this.onClickSignUp.bind(this)},"Create Account")),o.a.createElement("div",{style:T.resultLabel},this.state.message))}},{key:"onClickLogin",value:function(e){var t=this,n=new Request(this.loginUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password})});fetch(n).then((function(e){200===e.status?e.json().then((function(e){var n=e.result;if("user_not_found"===n)t.props.onLogin(!1),t.setState({message:"Account not found"});else if("user_found"===n){var a=e.config;console.log("Read config: "+Object.keys(a)),t.props.onLogin(!0),t.setState({message:"Account found"})}})):console.error("Something wrong")})).then((function(e){console.debug(e)})).catch((function(e){console.error(e)}))}},{key:"onClickSignUp",value:function(e){var t=this,n=this.state.username,a=this.state.password,o=A.getDefaultConfig();console.log(o);var i=new Request(this.signupURL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:a,config:o})});fetch(i).then((function(e){200===e.status?e.json().then((function(e){var n=e.result;"user_exists"===n?t.setState({message:"User Exists"}):"new_user"===n&&t.setState({message:"New User Created"})})):console.error("Something wrong")})).then((function(e){console.debug(e)})).catch((function(e){console.error(e)}))}},{key:"usernameChanged",value:function(e){var t=e.target.value;this.setState({username:t})}},{key:"passwordChanged",value:function(e){var t=e.target.value;this.setState({password:t})}}]),n}(o.a.Component),N=Object(h.a)(F),P=Object(h.a)(d.b),B={container:{display:"flex",flexDirection:"column",position:"relative",color:p,padding:E}},V=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={},a}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{style:B.container},"CALIBRATION",o.a.createElement(C,null,o.a.createElement(P,{to:"/l-0"},"CALIBRATE")))}}]),n}(o.a.Component),q=Object(h.a)(V),J=Object(h.a)(d.b),_={container:{position:"relative",color:p},modeContainer:{display:"flex",flexDirection:"column"}},M=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={},a}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{style:_.container},o.a.createElement("div",null,"MODE"),o.a.createElement("div",{style:_.modeContainer},o.a.createElement(C,null,o.a.createElement(J,null,"CONNECTION")),o.a.createElement(C,null,o.a.createElement(J,null,"SOLO")),o.a.createElement(C,null,o.a.createElement(J,{to:"/testcal"},"SETUP"))))}}]),n}(o.a.Component),G=Object(h.a)(M),H=Object(h.a)(d.b),X={container:{display:"flex",flexDirection:"column",position:"relative",color:p}},z=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={},a}return Object(l.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{style:X.container},o.a.createElement("div",null,"Testing Calibration"),o.a.createElement(C,null,o.a.createElement(H,{to:"/selectmode"},"SAVE")))}}]),n}(o.a.Component),K=Object(h.a)(z),Q=Object(h.a)(d.b),W={container:{display:"flex",flexDirection:"column",position:"relative",color:p},input:{width:"40px",height:"20px",marginBottom:"10px",marginTop:"5px"}},Y=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.getNextPath();return o.a.createElement("div",{style:W.container},"Chipset ",this.props.chipsetId,o.a.createElement("br",null),"Sensor ",this.props.sensorIdx,o.a.createElement(C,null,o.a.createElement(Q,{to:e},"NEXT")))}},{key:"getNextPath",value:function(){var e="",t=this.props.sensorIdx<11?this.props.sensorIdx:0;return 0===this.props.chipsetId&&this.props.sensorIdx<11?(e="/l-"+(t+=1),console.log(e)):(e="/r-"+(t+=1),console.log(e)),1===this.props.chipsetId&&11===this.props.sensorIdx&&(e="/testcal"),e}}]),n}(o.a.Component),Z=Object(h.a)(Y),$={container:{position:"relative",backgroundColor:m,padding:b}},ee=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={isConnected:!1,receiveVal:"Receive Text",isLoggedIn:!1},a.chipsetCollectionRef=o.a.createRef(),a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.getSensorCalibrationPages(),t=this.state.isLoggedIn?o.a.createElement(f.a,{to:"/setup"}):o.a.createElement(o.a.Fragment,null,o.a.createElement(x,null),o.a.createElement(N,{onLogin:this.hasLoggedIn.bind(this)})),n=this.state.isLoggedIn?o.a.createElement(o.a.Fragment,null,o.a.createElement(x,null),o.a.createElement(w,null)):o.a.createElement(f.a,{to:"/"}),a=this.state.isLoggedIn?o.a.createElement(o.a.Fragment,null,o.a.createElement(x,null),o.a.createElement(q,null)):o.a.createElement(f.a,{to:"/"}),i=this.state.isLoggedIn?o.a.createElement(o.a.Fragment,null,o.a.createElement(x,null),o.a.createElement(K,null)):o.a.createElement(f.a,{to:"/"}),s=this.state.isLoggedIn?o.a.createElement(o.a.Fragment,null,o.a.createElement(x,null),o.a.createElement(G,null)):o.a.createElement(f.a,{to:"/"});return o.a.createElement("div",{style:$.container},o.a.createElement(d.a,null,o.a.createElement(f.d,null,e,o.a.createElement(f.b,{path:"/selectmode"},s),o.a.createElement(f.b,{path:"/testcal"},i," "),o.a.createElement(f.b,{path:"/calibration"},a),o.a.createElement(f.b,{path:"/setup"},n),o.a.createElement(f.b,{path:"/"},t))))}},{key:"getSensorCalibrationPages",value:function(){for(var e="/l-",t=[],n=0;n<12;n++){var a=e+n,i=o.a.createElement(f.b,{key:"keyL:"+n,path:a},o.a.createElement(x,null),o.a.createElement(Z,{chipsetId:0,sensorIdx:n,key:"keyL:"+n}));t.push(i)}e="/r-";for(var s=0;s<12;s++){var r=e+s,l=o.a.createElement(f.b,{key:"keyR:"+s,path:r},o.a.createElement(x,null),o.a.createElement(Z,{chipsetId:1,sensorIdx:s,key:"keyR:"+s}));t.push(l)}return t}},{key:"hasLoggedIn",value:function(e){console.log("Login State: "+e),this.setState({isLoggedIn:e})}},{key:"logOut",value:function(){this.setState({isLoggedIn:!1})}}]),n}(o.a.Component),te=Object(h.a)(ee),ne=n(52);s.a.render(o.a.createElement(ne.a,null,o.a.createElement(te,null)),document.getElementById("root"))}},[[106,1,2]]]);
//# sourceMappingURL=main.459e5823.chunk.js.map