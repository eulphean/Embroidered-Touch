(this.webpackJsonpFabricInstrument=this.webpackJsonpFabricInstrument||[]).push([[0],{104:function(t,e,n){},105:function(t,e,n){},149:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),c=n(65),o=n.n(c),s=(n(104),n(105),n(8)),r=n(9),l=n(24),u=n(98),h=n(97),d=n(43),b=n(66),f=n.n(b),y=new(function(){function t(e){Object(s.a)(this,t),this.myBLE=new f.a,this.myRxCharacteristic="",this.myTxCharacteristic="",this.callbackData=e,this.isReceivingData=!1}return Object(r.a)(t,[{key:"connect",value:function(){this.myBLE.connect("6e400001-b5a3-f393-e0a9-e50e24dcca9e",this.handleCharacteristics.bind(this))}},{key:"stop",value:function(){""!==this.myRxCharacteristic?(this.myBLE.stopNotifications(this.myRxCharacteristic),this.isReceivingData=!1):console.warn("BLE: Not initialized.")}},{key:"handleCharacteristics",value:function(t,e){t?console.log("error: ",t):(this.myTxCharacteristic=e[0],this.myRxCharacteristic=e[1],this.myBLE.startNotifications(this.myRxCharacteristic,this.handleIncomingData.bind(this),"string"),this.isReceivingData=!0,console.log("BLE: Successfully paired. Ready to communicate."))}},{key:"handleIncomingData",value:function(t){var e,n,a,i=t.split("-");e=i[0][0],n=i[0][1],a=i[1].split(","),this.callbackData(e,n,a)}},{key:"sendBuffer",value:function(t){""!==this.myTxCharacteristic?(this.myTxCharacteristic.writeValue(t),console.log("BLE: Buffer sent: "+t)):console.warn("BLE: Ensure Bluetooth is connected.")}}]),t}()),p=n(67),v=n.n(p),m=new(function(){function t(){Object(s.a)(this,t),this.socket=v()("https://fabric-backend.herokuapp.com/app",{reconnection:!0,reconnectionDelay:500,reconnectionAttempts:1/0}),this.socket.once("connect",this.subscribe.bind(this)),this.canBroadcast=!1,this.dataCallback=""}return Object(r.a)(t,[{key:"subscribe",value:function(){console.log("Connected"),this.socket.on("time",this.logTime.bind(this)),this.socket.on("receiveSensorData",this.handleSensorData.bind(this))}},{key:"subscribeForUpdate",value:function(t){this.dataCallback=t,console.log(this.dataCallback)}},{key:"disconnect",value:function(){console.log("Socket Server Disconnected.")}},{key:"logTime",value:function(t){console.log("Socket Connection Alive: "+t)}},{key:"updateBroadcast",value:function(){this.socket.emit("broadcast"),this.canBroadcast=!this.canBroadcast}},{key:"broadcastText",value:function(t){this.canBroadcast&&this.socket.emit("sensorData",t)}},{key:"handleSensorData",value:function(t){this.dataCallback(t)}}]),t}()),k=n(25),C=n.n(k),g=(n(138),n(68)),x=n.n(g),E=function(t){var e,n;t.preload=function(){e=t.loadSound(x.a)},t.setup=function(){t.noCanvas(),t.background(0),n=new C.a.Envelope(.1,.7,.3,.1)},t.draw=function(){t.noLoop()},t.play=function(){e.stop(),e.loop(),n.triggerAttack(e)}},B=new(function(){function t(){Object(s.a)(this,t),this.myP5=new C.a(E)}return Object(r.a)(t,[{key:"play",value:function(){this.myP5.play()}}]),t}()),D={container:{position:"relative"},content:{display:"flex",flexDirection:"column",width:"500px"},inputContainer:{display:"flex",flexDirection:"row"},input:{width:"200px",marginTop:"10px",marginLeft:"10px"},connected:{backgroundColor:"green"}},w=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).state={isConnected:!1,receiveVal:"Receive Text"},m.subscribeForUpdate(a.onDataReceived.bind(Object(l.a)(a))),a}return Object(r.a)(n,[{key:"render",value:function(){var t=this.state.isConnected?[D.input,D.connected]:D.input;return i.a.createElement("div",{style:D.content},i.a.createElement("button",{onClick:this.onClick.bind(this)},"BLE Connect"),i.a.createElement("button",{onClick:this.onPlay.bind(this)},"Play Some Audio"),i.a.createElement("div",{style:D.inputContainer},i.a.createElement("input",{onChange:this.onTextAdded.bind(this),style:D.input,type:"text",placeholder:"Transmit text."}),i.a.createElement("div",{style:D.input},this.state.receiveVal)),i.a.createElement("button",{style:t,onClick:this.enableConnect.bind(this)},"Enable Connect"))}},{key:"onClick",value:function(){y.connect()}},{key:"onPlay",value:function(){B.play()}},{key:"enableConnect",value:function(){this.setState({isConnected:!this.state.isConnected}),m.updateBroadcast()}},{key:"onTextAdded",value:function(t){var e=t.target.value;m.broadcastText(e)}},{key:"onDataReceived",value:function(t){console.log("Data received: "+t),this.setState({receiveVal:t})}}]),n}(i.a.Component),T=Object(d.a)(w),j=n(44);o.a.render(i.a.createElement(j.a,null,i.a.createElement(T,null)),document.getElementById("root"))},68:function(t,e,n){t.exports=n.p+"static/media/testsound.1f40cfce.wav"},99:function(t,e,n){t.exports=n(149)}},[[99,1,2]]]);
//# sourceMappingURL=main.42578898.chunk.js.map